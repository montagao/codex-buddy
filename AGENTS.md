# Repository Guidelines

## Project Structure & Module Organization

- `src/` hosts the TypeScript entry points (`content.ts` for DOM scraping, `paste.ts` for clipboard helpers, `collect-inline.js` for legacy inline logic). Centralize shared code here.
- Top-level HTML/JS files (`popup.html`, `popup-script.js`, `options.html`, `background.js`) wire the Chrome extension UI and service worker; import helpers from `src/` instead of duplicating logic.
- `manifest.json` is the source of truth for permissions and entry points. Update its `version` whenever you ship changes.
- `dist/` is generated by Vite. Never edit it manually; rebuild instead.

## Build, Test, and Development Commands

- `npm install` — install dependencies before your first run or when package.json changes.
- `npm run dev` — launches Vite in watch mode and rebuilds the extension bundle; reload via `chrome://extensions` → “Load unpacked”.
- `npm run build` — produces the production bundle in `dist/`. Run this before attaching artifacts to a release.
- `npm run preview` — serves the built assets for a final smoke-check in a local browser window.

## Coding Style & Naming Conventions

- Use ES modules, arrow functions, two-space indentation, and single quotes to match existing TypeScript style.
- Prefer descriptive camelCase for functions (`findVersionButtons`) and reserve CAPITAL_SNAKE_CASE for constants.
- Keep DOM queries in helpers and limit side effects in background scripts to listener callbacks.

## Testing Guidelines

- Automated tests are not yet configured; when adding them, reach for Vitest with jsdom and place specs under `src/__tests__/`.
- Until then, rely on manual QA: run `npm run dev`, load the unpacked extension in Chrome, and exercise content and popup flows against real Codex PR pages.
- Capture manual test notes in PR descriptions so reviewers can replay them.

## Commit & Pull Request Guidelines

- Recent commits are short, lower-case summaries; keep them one-line, imperative (`add highlight helper`), and under ~72 characters.
- Reference issues in the body (`Refs #123`) and list what you manually tested.
- Pull requests should cover purpose, key implementation notes, screenshots or recordings for UI changes, and any follow-up tasks.

## Security & Configuration Tips

- Keep API tokens and private URLs out of the repo; load configuration from environment variables during the build.
- Review `manifest.json` permissions with every change and scope hosts to the minimum required domains.
